##用户

###### 用户表注册表 `data_users_register` (只记录第一次注册后的信息,申述使用)

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |用户表|
| email | varchar| 32 | Y | 普通索引 | 用户邮箱|
| tel | varchar| 32  | Y | 普通索引 | 手机号码|
| password  |varchar  | 255 | N   |  |密码|
| third_party_id | char| 64  | Y |  | 第三方 ID |
| register_ip | varchar| 45  | N |  | 注册ip |
| created_at | timestamp| 0  | Y |  | 添加时间|
| updated_at | timestamp| 0 | Y | | 修改时间|

###### 用户表登陆索引表 `index_users_login`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   | 主键索引|用户表|
| user_id | int| 10  | N  | index | 用户ID |
| login_name | varchar| 32  | N  |  | 登录账号|
| password  |varchar  | 255  | N   |  |登录密码|
| last_login_ip | varchar| 32  | N  |  | 最后一次登录IP |
| last_login_at | timestamp| 0  | N  |  | 最后一次登录时间 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

###### 登陆日志表 `log_users_login`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   | 主键索引| 用户登录日志表
| user_id  | 10  | N  | 普通索引   |  |用户注册表 id|
| login_name  |varchar  | 32  | ||登陆账号  |
| third_party | tinyint| 4  | N  |  | 第三方登陆: 1 网站 2 微信 3 微博 4 QQ ... |
| login_ip | varchar| 45  | N  |  | 登录IP |
| login_time | timestamp| 0  | N  |  | 登录时间 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

###### 用户表信息 `data_users_info`
| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |用户表|
| user_id  |int  | 10  | N   | 唯一索引 |用户注册源信息表|
|nickname | varchar| 64  | Y  |  | 用户昵称 |
|realname | varchar| 64  | Y  |  | 真实姓名 |
| email | varchar| 32  | Y  |  | 用户邮箱|
| tel | varchar| 32  | Y  |  | 手机号码|
| sex | tinyint| 4  | Y  |  | 性别:1男 2 女 |
| avatar | varchar| 64  | Y  |  | 头像 |
| id_number | varchar| 32  | Y  |  | 身份证号码 |
| answer_1 | varchar| 64  | Y  |  | 密保问题1 |
| answer_2 | varchar| 64  | Y  |  | 密保问题2 |
| id_number | varchar| 32  | Y  |  | 身份证号码 |
| birthday | varchar| 32  | Y  |  | 生日 |
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | N  | | 修改时间|
| delete_at | timestamp| 0 | N  | | 删除时间|

######前台用户操作日志表 `log_users_operation`
| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |用户操作日志表|
| operator_id | int| 10  | N  | 普通索引 | 用户ID |
| login_ip | varchar| 45  | N  |  | 操作IP |
| content | text| 0  | N  |  | 操作内容|
| events | text| 255  | N  |  | 操作事件 (路由与参数)|
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

###### 收货地址管理表 `data_receiving_address`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |收货地址管理表|
| user_id | int| 10  | N  | 普通索引 | 用户ID|user表ID
| consignee | varchar | 64  | N  |  | 收货人 |
| tel | varchar| 32  | N  |  | 收货人手机号 |
| province | varchar| 32  | N  |  | 省份 |
| city | varchar| 32  | N  |  | 城市 |
| county | varchar| 32  | N  |  | 县 |
| detailed_address | varchar| 255  | N  |  | 详细地址|
| status | tinyint| 4  | N  |  | 地址状态 1:普通 2:默认 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

###### 货品关注表 `data_cargo_collection` (关注的某一个货品)

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |收藏表| 货品关注表
| user_id | int | 10  | N  | 普通索引 | 用户ID|
| cargo_id | int | 10  | N  | 普通索引 | 货品ID|
| focus_type | tinyint | 4  | N  |  | 关注类型如：1 到货提醒，2 降价提醒 |
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

##后台管理员

######管理员表 `data_admin_users`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |管理员表|
|nickname | varchar| 64  | N  |  | 用户昵称 |
| password  |varchar  | 255  | N   |  |密码|
| tel | varchar| 32  | N  | 普通索引 | 手机号码|
| avatar | varchar| 64  | Y  |  | 头像 |
| last_login_ip | varchar| 32  | Y  |  | 最后一次登录IP |
| last_login_at | timestamp| 0  | Y  |  | 最后一次登录时间 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

######管理员操作日志表 `log_admin_users_operation`
| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |管理员操作日志表|
| operator_id | int| 10  | N  | 普通索引 | 用户ID |
| login_ip | varchar| 45  | N  |  | 操作IP |
| content | text| 0  | N  |  | 操作内容|
| events | text| 255  | N  |  | 操作事件 (路由与参数)|
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|



##商品

######商品表 (主模板) `data_goods`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |商品表|
| category_id | int | 10  | N  | 普通索引  | 分类 ID | 
| goods_title | varchar | 255  | N   | | 商品标题 |
| goods_status | tinyint| 4  | N  |  | 商品状态 1:待售 2:上架 3:下架 |默认为 1|
| goods_original| json | 0  | N  |  | 商品原图 | 多图
| goods_info | text | 0  | N  |  |  图文详细信息| 
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

######商品标签表 `data_goods_labels`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |商品属性表|
| category_id| int | 10  | N  | 普通索引 | 分类ID |
| goods_label_name| varchar |32  | N  |  | 商品标签名|
| goods_label_status| tinyint | 4  | N   | | 启用禁用  1:启用 2 禁用 | 默认为 1
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间 |

######商品标签值表`data_goods_attributes`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |商品属性值表|
| goods_label_id  |int  | 10  | N   |普通索引 | 商品标签ID |
| goods_label_name| varchar |64  | N  |  | 商品标签值名称 |
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间 |

##### 货品表 (data_cargo)

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  |  N  | 主键索引 |货品表|
| category_id | int | 10  | N | 普通索引 | 分类ID |
| goods_id | int | 10  | N | 普通索引 | 商品ID |
| cargo_name | varchar | 255 | N |  | 货品名称 |
| cargo_ids | json | 0 | N |  | 货品标签 |
| cargo_cover | varchar| 255  | N |  | 货品封面 |
| inventory | int | 11 | N  |  | 库存量 |
| cargo_price | decimal | 7  | N  |  | 货品原价 |
| cargo_discount | decimal | 7  | N  |  | 货品折扣 |
| sales_volume | int |  11| N |  | 销售量 |
| number_of_comments | int | 11 | N |  | 评论数 |
| cargo_original| json | 0  | N  |  | 货品原图 | 多图 |
| cargo_info| json | 0  | N  |  | 货品详情 | 多图 |
| cargo_status | tinyint| 4  | N  |  | 货品状态 1:待售 2:上架 3:下架 |默认为 1|
| created_at | timestamp| 0  | Y  |  | 添加时间 |
| updated_at | timestamp| 0 | Y  | | 修改时间 |
| delete_at | timestamp| 0 | Y  | | 删除时间 |

###### 推荐位与货品关联表 `rel_recommend_goods`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引  | 推荐位与货品关联表 |
| recommend_id  | int  | 10  | N   | 普通索引 |推荐位ID|
| cargo_id | int| 2  | 10  |  普通索引|  货品ID |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

######分类标签值与货品关联表 `rel_label_cargos`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | --- |
| id  |int  | 10  | N   | 主键索引 | 分类标签值与货品关联表 |
| category_attr_ids | json |   | Y |  | 分类标签值ID |
| goods_id | int | 11  | N |  | 商品ID |
| cargo_id | int | 11  | N |  | 货品ID |
| created_at | timestamp| 0  | Y  |  | 添加时间 |
| updated_at | timestamp| 0 | Y  | | 修改时间 |

######商品标签关联表`rel_goods_label`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| goods_id  |int  | 10  | N   | 普通索引| 商品ID |
| goods_label_id | int | 10 | N  | 普通索引 | 商品标签ID |
| created_at | timestamp| 0  | N  |  | 添加时间 |
| updated_at | timestamp| 0 | Y  | | 修改时间 |

######商品标签值关联表`rel_goods_attrs`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| goods_id  |int  | 10  | N   | 普通索引| 商品ID |
| goods_attr_id | int | 10 | N  | 普通索引 | 商品标签值ID |
| created_at | timestamp| 0  | N  |  | 添加时间 |
| updated_at | timestamp| 0 | Y  | | 修改时间 |

######商品索引表 `index_goods`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |商品索引表|
| goods_id | int | 10  | N  | 普通索引 | 商品ID |
| cargo_id | int | 10  | N  | 普通索引 | 货品ID |
| body | text |   | N  | 全文本索引 | 分词后的内容 |
| created_at | timestamp| 0  | N  |  | 添加时间 |
| updated_at | timestamp| 0 | Y  | | 修改时间 |
| delete_at | timestamp | 0 | Y  |  | 删除时间 |

###### 订单管理表 `data_orders`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   | |订单管理表|
|user_id | int | 10  | N  | 普通索引 | 用户ID|
| guid  | char  | 32  | N   | 普通索引 |订单编号|
| cargo_message |json | 0  | N  |  | 下单商品信息 :单价、数量、商品ID|
| address_message | json | 0  | N  | | 收货地址信息|
| pay_transaction | varchar | 64  | Y  | | 支付交易号
| pay_type | tinyint | 2  | N  |  | 支付方式 1:支付宝 2:微信 3:其他|
| pay_status | tinyint | 2  | N  |普通索引  | 支付状态 1:待支付 2:已支付 3:取消支付|
| total_amount|varchar | 64  | N  |  | 商品总金额|
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

 ###### 商品订单详情表 `data_orders_details`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   | |商品订单详情表|
| order_guid  | char  | 32  | N   | 普通索引 |订单编号|订单表GUID
| user_id | int | 10  | N  | 普通索引 | 用户ID|data_user表的主键
| goods_id |int | 10  | N  | 普通索引 | 商品ID|data_goods表的主键
| cargo_id |int | 10  | N  | 普通索引 | 商品ID|data_cargo表的主键
| order_status | tinyint | 4  | N  |  | 订单状态 1:待付款 2: 待发货 3:待收货 4:待评价 5 完成 6 取消  默认为1 |
| commodity_number |int | 11  | N  |  | 商品数量|
| cargo_price |varchar | decimal  | 11  |  | 商品单价 |
| return_status |tinyint | 4  | N  |  | 退货状态 1 不退货 2:退货 默认为1  |
| comment_status |tinyint | 4  | N  |  | 评论状态: 1 未评论 2:已评论 默认为1 |
| addtime | int| 11  | N  |  | 添加时间|
| delete_at | timestamp| 0 | Y  | | 自定义软删除 1正常 2 删除|

######商品评论表 `data_goods_comment`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   | |商品评论表|
| goods_id  | int  | 10  | N   |  |商品ID| 
| order_id  | int  | 10  | N   | 普通索引 |订单详情表ID|
| cargo_id  | int  | 10  | N   | 普通索引 |商品ID| 
| user_id  | int  | 10 | N   | 普通索引 |用户ID| 
| comment_type  | tinyint  | 2  | N   |  |匿名评价  0:匿名评价 1:显示用户名| 默认为0 
| star | tinyint | 4 | N |  | 1 好评 2 中评 3 差评 |
| comment_info  |text  | 0 | N   |  | 评价内容|
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|


##网站设置

######分类表 `data_category`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |分类表|
| pid |int  | 10  | N   | |父级ID |
| name | varchar|32  | N  |  | 分类名称 |
| level | tinyint|4  | N  |  | 分类层级 1 2 3 4 |
| describe | varchar|255  | Y  |  | 分类描述 |
| img | varchar|64  | Y  |  | 图标或图片 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

######分类标签表 `data_category_labels`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  | int  | 10  | N   |主键索引 |分类属性表|
| category_label_name| varchar | 32  | N   | |分类标签名称 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

######分类标签值表 `data_category_attributes`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  | int  | 10  | N   |主键索引 |分类属性值表|
| attribute_name| varchar | 32  | N   | | 标签值 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|


######分类标签关联表 `rel_category_labels`
| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  | int  | 10  | N   |主键索引 | 分类标签关联表 |
| category_id| int | 10  | N   |普通索引 | 分类ID |
| category_label_id| int | 10  | N   |普通索引 | 分类标签ID |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|


######分类标签值关联表 `rel_category_attributes`
| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  | int | 10 | N |主键索引 | 分类标签值关联表 |
| category_id | int | 10 | N |  普通索引| 分类ID |
| category_attribute_id | int | 10  | N | 普通索引 | 标签值ID |
| created_at | timestamp | 0 | N  |  | 添加时间 |
| updated_at | timestamp | 0 | Y  |  | 修改时间 |

######分类标签键值关联表 `rel_category_label_attributes`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id | int |  10| N | 主键索引 | 分类标签键值关联表 |
| cid | int | 10 | N |  | 分类ID |
| lid | int |  10| N |  | 标签ID |
| aid | int |  10| N |  | 标签值ID |
| updated_at | timestamp | 0 | Y  |  | 修改时间 |
| delete_at | timestamp | 0 | Y  |  | 删除时间 |

######友情链接表 `data_friend_link`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |友情链接表|
| name | varchar | 32  | N  |  | 名称|
| type| tinyint|  4 | N  |  | 链接类型 1:图片 2文字 | 
| url| varchar |  64 | N  |  | 链接地址 | 
| image |varchar |  64 | Y  |  | 图片名称 |
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | N  | | 修改时间|
| delete_at | timestamp| 0 | N  | | 删除时间|

######网站基本信息表 `data_basic_config`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  |int  | 10  | N   |主键索引 |网站基本配置表|
| site_name | varchar|32  | N  |  | 网站名称|
| site_describe | varchar|255  | N  |  | 网站描述|
| telephone| char|  32| N  |  | 400电话|
| logo| varchar|  32 | N  |  | 网站logo|
| level_set | tinyint|  4 | N  |  | 分类层级设置 默认 4级|
| record_number| varchar|  32| N  |  | 网站备案号|
| address| varchar|  255| N  |  | 公司地址|
| copyright| varchar|  64| N  |  | 版权信息|
| created_at | timestamp| 0  | N  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

######推荐位表 `data_recommend`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id  | int  | 10  | N   |主键索引 | 推荐位表 |
| recommend_name| varchar | 255  | N   | | 推荐位名称 |
| recommend_location| tinyint | 4  | N   | | 推荐位位置 1 首页 |
| recommend_type| tinyint |  4 | N   | | 推荐位类型 |
| recommend_introduction | varchar | 255  | N   | | 楼位导语 |
| created_at | timestamp| 0  | Y  |  | 添加时间|
| updated_at | timestamp| 0 | Y  | | 修改时间|
| delete_at | timestamp| 0 | Y  | | 删除时间|

######商品活动表 `data_activitys`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id | int |  10| N | 主键索引 | 商品活动表 |
| name | varchar | 100 | N | | 活动名称 |
| desc | varchar | 200 | N | | 活动描述 |
| type | tinyint |  | 4 |  | 活动类型 1:秒杀 2:特惠 3:团购 4:超值 |
| start_timestamp | int | 10 | N |  | 开始时间戳 |
| length | samllint | 5 | N |  | 活动时长 |
| end_timestamp | int |  | 10 |  | 结束时间戳 |
| is_over | tinyint | 4 | N |  | 结束标识 0 未结束 1 已结束 默认 0 |
| created_at | timestamp | 0 | N |  | 添加时间 |
| updated_at | timestamp | 0 | Y |  | 修改时间 |


######商品活动关联表 `rel_goods_activitys`

| 名称 | 类型 | 长度 | 是否为空 | 索引 | 注释 |备注|
| --- | --- | --- | --- | --- | --- | ---|
| id | int | 10 | N | | 商品活动关联表 |
| activity_id | int |10  | N | 普通索引 | 活动ID |
| cargo_id | int | 10 | N | 普通索引 | 货品ID |
| number | smallint | 6 | N |  | 用来做活动的商品数量 |
| promotion_price | decimal |  | N |  | 促销价 |
| created_at | timestamp | 0 | N |  | 添加时间 |
| updated_at | timestamp | 0 | Y |  | 修改时间 |

